webpackJsonp([32],{"2+pB":function(e,t){},NhOB:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"projectOptRecord",data:()=>({project_opt_type_code_list:null,exec_state_code_list:null,project_code_list:null,project_team_code_list:[],project_selected_code_list:[],msg_level_list:null,searchFormData:{pageNum:1,pageSize:18,pageCount:1,order:"-createTime"},tableData:[]}),async mounted(){this.project_code_list=await this.$getProjectCodeInfo(),this.project_opt_type_code_list=await this.$setCodeList(this.project_opt_type_code_list,"project_opt_type"),this.exec_state_code_list=await this.$setCodeList(this.exec_state_code_list,"exec_state"),this.project_team_code_list=await this.$getProjectTeamCodeInfo(),this.search()},methods:{async project_team_change(e){this.project_selected_code_list=await this.$getProjectCodeInfo({project_team_id:e}),void 0!==this.searchFormData.project_id&&(this.searchFormData.project_id="")},handleSizeChange(e){this.searchFormData.pageSize=e,this.search()},handleCurrentChange(e){this.searchFormData.pageNum=e,this.search()},onReset(){this.$refs.searchFormRef.resetFields(),this.search()},onSearch(){this.searchFormData.pageNum=1,this.search()},async search(){let e=this.searchFormData,t=await this.$search(e,"OAMP_search_project_opt_record_info_list");this.searchFormData.pageCount=t.pageCount,this.tableData=t.data},format_exec_state(e,t,a){return this.$formatCodeValue(e,this.exec_state_code_list,"exec_state_code_id")},format_project_opt_type(e,t,a){return this.$formatCodeValue(e,this.project_opt_type_code_list,"project_opt_type_code_id")},format_project(e,t,a){return this.$formatCodeValue(e,this.project_code_list,t.property,"_id","project_name")},format_is_opt_success:(e,t,a)=>"1"===e.is_opt_success?"成功":"0"===e.is_opt_success?"失败":"暂无结果",format_is_able_rollback:(e,t,a)=>"1"===e.is_able_rollback?"是":"否",format_remote_exec_result(e,t,a){let o=e.remote_exec_result,r="";if(e&&o.length>0)for(let e=0;e<o.length;e++)r=r+"【"+o[e].request_ip+"服务器"+o[e].summary+"】";return r}}},r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticStyle:{"padding-top":"5px"}},[a("el-form",{ref:"searchFormRef",attrs:{inline:!0,model:e.searchFormData,size:"mini"}},[a("el-form-item",{attrs:{label:"项目组名称",prop:"project_team_id"}},[a("el-select",{attrs:{placeholder:"请选择项目组",clearable:""},on:{change:e.project_team_change},model:{value:e.searchFormData.project_team_id,callback:function(t){e.$set(e.searchFormData,"project_team_id",t)},expression:"searchFormData.project_team_id"}},e._l(e.project_team_code_list,function(e){return a("el-option",{key:e._id,attrs:{label:e.project_team_name,value:e._id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"项目名称",prop:"project_id"}},[a("el-select",{attrs:{placeholder:"请选择项目",clearable:""},model:{value:e.searchFormData.project_id,callback:function(t){e.$set(e.searchFormData,"project_id",t)},expression:"searchFormData.project_id"}},e._l(e.project_selected_code_list,function(e){return a("el-option",{key:e._id,attrs:{label:e.project_name,value:e._id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"操作时间",prop:"createTime"}},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始时间","end-placeholder":"结束时间"},model:{value:e.searchFormData.createTime,callback:function(t){e.$set(e.searchFormData,"createTime",t)},expression:"searchFormData.createTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"操作类型",prop:"project_opt_type_code_id"}},[a("el-select",{attrs:{placeholder:"操作类型",clearable:""},model:{value:e.searchFormData.project_opt_type_code_id,callback:function(t){e.$set(e.searchFormData,"project_opt_type_code_id",t)},expression:"searchFormData.project_opt_type_code_id"}},e._l(e.project_opt_type_code_list,function(e){return a("el-option",{key:e.codeId,attrs:{label:e.codeValue,value:e.codeId}})}),1)],1),e._v(" "),a("div",{staticClass:"v-search-opt"},[a("div",{staticClass:"v-pagination"},[a("el-pagination",{attrs:{"current-page":e.searchFormData.pageNum,"page-size":e.searchFormData.pageSize,total:e.searchFormData.pageCount,"page-sizes":[18,50,100],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("div",{staticClass:"v-inline"},[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onSearch}},[a("i",{staticClass:"iconfont icon-chaxun"}),e._v(" 查询")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:e.onReset}},[a("i",{staticClass:"iconfont icon-chongzhi"}),e._v(" 重置")])],1)])],1),e._v(" "),a("hr"),e._v(" "),a("el-table",{attrs:{data:e.tableData,border:!0,size:"small",height:e.getTableHeight(98)}},[a("el-table-column",{attrs:{fixed:"",type:"index",index:e.onIndexMethod(e.searchFormData.pageNum,e.searchFormData.pageSize),label:"序号",width:"60"}}),e._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"操作时间",width:"156"}}),e._v(" "),a("el-table-column",{attrs:{width:"156","show-overflow-tooltip":!0,prop:"project_id",label:"项目名称",formatter:e.format_project}}),e._v(" "),a("el-table-column",{attrs:{prop:"project_opt_user_name",label:"操作人",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"project_opt_version",label:"操作版本",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"project_opt_last_version",label:"上个版本",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"project_opt_type_code_id",label:"操作类型",width:"80",formatter:e.format_project_opt_type}}),e._v(" "),a("el-table-column",{attrs:{prop:"is_opt_success",label:"操作结果",width:"80",formatter:e.format_is_opt_success}}),e._v(" "),a("el-table-column",{attrs:{prop:"is_able_rollback",label:"可回滚",width:"60",formatter:e.format_is_able_rollback}}),e._v(" "),a("el-table-column",{attrs:{prop:"project_opt_start_time",label:"操作开始时间",width:"156"}}),e._v(" "),a("el-table-column",{attrs:{prop:"project_opt_end_time",label:"操作结束时间",width:"156"}}),e._v(" "),a("el-table-column",{attrs:{prop:"exec_state_code_id",label:"远程执行状态",formatter:e.format_exec_state,width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remote_exec_count",label:"获取状态次数",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remote_exec_result",label:"远程执行结果","show-overflow-tooltip":!0,formatter:e.format_remote_exec_result}}),e._v(" "),a("el-table-column",{attrs:{prop:"project_opt_summary",label:"操作描述","show-overflow-tooltip":!0}})],1)],1)},staticRenderFns:[]};var l=a("VU/8")(o,r,!1,function(e){a("2+pB")},"data-v-55d5abf4",null);t.default=l.exports}});
//# sourceMappingURL=32.b2610dc6246136552c3a.js.map