webpackJsonp([9],{IJwd:function(t,e){},JWKK:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a={name:"toolManageList",data(){return{module_name:"toolManage",refresh_page_method:"refresh_"+this.module_name,tool_type_code_list:null,tool_project_info_list:null,searchFormData:{pageNum:1,pageSize:14,pageCount:1,order:"+project"},tableData:[],searchFormRules:{toolHost:[{validator:this.$checkIP,trigger:"blur"}],toolPort:[{validator:this.$checkPort,trigger:"blur"}]}}},created(){this.$store.state.Apps.$on(this.refresh_page_method,()=>{this.search()})},mounted(){this.set_tool_type(),this.set_tool_project(),this.onSearch()},methods:{handleSizeChange(t){this.searchFormData.pageSize=t,this.onSearch()},handleCurrentChange(t){this.searchFormData.pageNum=t,this.onSearch()},onReset(){this.$refs.searchFormRef.resetFields(),this.onSearch()},async set_tool_type(){this.tool_type_code_list||(this.tool_type_code_list=await this.$getCodeValuesByCode("tool_type"))},async set_tool_project(){this.tool_project_info_list||(this.tool_project_info_list=await this.$getProjectCodeInfo())},format_tool_type(t,e,o){if(this.tool_type_code_list&&this.tool_type_code_list.length>0){let e=this.tool_type_code_list.filter(e=>e.codeId===t.tool_type_code_id);if(null!=e&&e.length>0)return e[0].codeValue}},format_project_name(t,e,o){if(this.tool_project_info_list&&this.tool_project_info_list.length>0){let e=this.tool_project_info_list.filter(e=>e._id===t.tool_project_id);if(null!=e&&e.length>0)return e[0].project_name}},async r_searchTable(t){let e=new this.$http,{data:o}=await e.post(t,"OAMP_search_tool_list");this.searchFormData.pageCount=o.pageCount,this.tableData=o.data},async r_delete_tool_info(t){let e=new this.$http,{data:o}=await e.post(t,"OAMP_delete_tool_info");return null!=o&&"null"!==o},onSearch(){let t=this.searchFormData;this.r_searchTable(t)},onDelete(t,e){let o=e[t];this.r_delete_tool_info(o)?(e.splice(t,1),this.$message.success("删除数据成功"),this.onSearch()):this.$message.error("删除数据失败")}}},l={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticStyle:{"padding-top":"2px"}},[o("el-form",{ref:"searchFormRef",attrs:{inline:!0,model:t.searchFormData,rules:t.searchFormRules,size:"mini"}},[o("el-form-item",{attrs:{label:"工具类型",prop:"tool_type_code_id"}},[o("el-select",{attrs:{placeholder:"工具类型",clearable:""},model:{value:t.searchFormData.tool_type_code_id,callback:function(e){t.$set(t.searchFormData,"tool_type_code_id",e)},expression:"searchFormData.tool_type_code_id"}},t._l(t.tool_type_code_list,function(t){return o("el-option",{key:t.codeId,attrs:{label:t.codeValue,value:t.codeId}})}),1)],1),t._v(" "),o("el-form-item",{attrs:{label:"工具名称",prop:"toolName"}},[o("el-input",{attrs:{placeholder:"工具名称"},model:{value:t.searchFormData.toolName,callback:function(e){t.$set(t.searchFormData,"toolName",e)},expression:"searchFormData.toolName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"工具端口",prop:"toolPort"}},[o("el-input",{attrs:{placeholder:"工具端口"},model:{value:t.searchFormData.toolPort,callback:function(e){t.$set(t.searchFormData,"toolPort",e)},expression:"searchFormData.toolPort"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"工具IP",prop:"toolHost"}},[o("el-input",{attrs:{placeholder:"工具IP"},model:{value:t.searchFormData.toolHost,callback:function(e){t.$set(t.searchFormData,"toolHost",e)},expression:"searchFormData.toolHost"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"工具使用者",prop:"toolUser"}},[o("el-input",{attrs:{placeholder:"工具使用者"},model:{value:t.searchFormData.toolUser,callback:function(e){t.$set(t.searchFormData,"toolUser",e)},expression:"searchFormData.toolUser"}})],1),t._v(" "),o("div",{staticClass:"v-search-opt"},[o("div",{staticClass:"v-pagination"},[o("el-pagination",{attrs:{"current-page":t.searchFormData.pageNum,"page-size":t.searchFormData.pageSize,total:t.searchFormData.pageCount,"page-sizes":[14,20,50,100],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),o("div",{staticClass:"v-inline"},[o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.onSearch}},[o("i",{staticClass:"iconfont icon-chaxun"}),t._v(" 查询")]),t._v(" "),o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.onReset}},[o("i",{staticClass:"iconfont icon-chongzhi"}),t._v(" 重置")]),t._v(" "),o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){return t.onAdd(t.module_name)}}},[o("i",{staticClass:"iconfont icon-xinzeng"}),t._v(" 新增")])],1)])],1),t._v(" "),o("hr"),t._v(" "),o("el-table",{attrs:{data:t.tableData,border:!0,stripe:!0,size:"mini",height:t.getTableHeight(130)}},[o("el-table-column",{attrs:{fixed:"",type:"index",index:t.onIndexMethod(t.searchFormData.pageNum,t.searchFormData.pageSize),label:"序号",width:"60"}}),t._v(" "),o("el-table-column",{attrs:{fixed:"",prop:"tool_type_code_id",formatter:t.format_tool_type,label:"工具类型",width:"180"}}),t._v(" "),o("el-table-column",{attrs:{fixed:"",prop:"tool_project_id",formatter:t.format_project_name,label:"所属项目名称","show-overflow-tooltip":!0,width:"180"}}),t._v(" "),o("el-table-column",{attrs:{prop:"toolName",label:"工具名称","show-overflow-tooltip":!0,width:"180"}}),t._v(" "),o("el-table-column",{attrs:{prop:"toolPort",label:"工具端口",width:"120"}}),t._v(" "),o("el-table-column",{attrs:{prop:"toolHost",label:"工具IP",width:"180"}}),t._v(" "),o("el-table-column",{attrs:{prop:"toolUser",label:"工具使用者",width:"180"}}),t._v(" "),o("el-table-column",{attrs:{prop:"toolContext",label:"工具所属项目","show-overflow-tooltip":!0,width:"180"}}),t._v(" "),o("el-table-column",{attrs:{prop:"createTime",label:"创建时间"}}),t._v(" "),o("el-table-column",{attrs:{prop:"updateTime",label:"修改时间"}}),t._v(" "),o("el-table-column",{attrs:{fixed:"right",label:"操作",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-row",{attrs:{gutter:10}},[o("el-col",{attrs:{span:8}},[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"查看",placement:"left"}},[o("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(o){return o.preventDefault(),t.onView(t.module_name,e.$index,t.tableData)}}},[o("i",{staticClass:"iconfont icon-chakan"})])],1)],1),t._v(" "),o("el-col",{attrs:{span:8}},[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"修改",placement:"left"}},[o("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(o){return o.preventDefault(),t.onEdit(t.module_name,e.$index,t.tableData)}}},[o("i",{staticClass:"iconfont icon-xiugai"})])],1)],1),t._v(" "),o("el-col",{attrs:{span:8}},[o("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"left"}},[o("el-button",{attrs:{type:"text",size:"small"},nativeOn:{click:function(o){return o.preventDefault(),t.onDelete(e.$index,t.tableData)}}},[o("i",{staticClass:"iconfont icon-shanchu icon-red"})])],1)],1)],1)]}}])})],1)],1)},staticRenderFns:[]};var r=o("VU/8")(a,l,!1,function(t){o("uG1M")},"data-v-52fbd17d",null).exports,s={name:"toolManageInfo",data(){return{module_name:"toolManage",refresh_page_method:"refresh_"+this.module_name,tool_type_code_list:null,tool_project_info_list:null,pageData:{tool_project_id:"",tool_type_code_id:"",toolCode:"",toolCodeId:"",toolName:"",toolPort:0,toolHost:"",toolUser:"",toolPassword:"",toolContext:"",remark:""},pageDataRules:{toolCodeId:[{required:!0,message:"请选择工具类型",trigger:"blur"}],toolName:[{required:!0,message:"请输入工具名称",trigger:"blur"}],toolHost:[{required:!0,message:"请输入工具IP",trigger:"blur"}],toolUser:[{required:!0,message:"请输入工具登录用户",trigger:"blur"}],toolPort:[{validator:this.$checkPort,trigger:"blur"}]}}},computed:{pageInfo(){return this.$setPageInfo(this.module_name)}},mounted(){this.set_tool_type(),this.set_tool_project()},methods:{async set_tool_type(){this.tool_type_code_list||(this.tool_type_code_list=await this.$getCodeValuesByCode("tool_type"))},async set_tool_project(){this.tool_project_info_list||(this.tool_project_info_list=await this.$getProjectCodeInfo())},async r_addToolInfo(t){let e=new this.$http,{data:o}=await e.post(t,"OAMP_insert_tool_info");return null!=o&&"null"!==o?o.data:null},addToolInfo(){let t=this;this.$refs.pageDataRef.validate(async e=>{if(e){let e=t.pageData;null!=await t.r_addToolInfo(e)?(t.$message.success("新增工具信息成功"),t.closeDialog()):t.$message.error("新增工具信息失败")}})},async onUpdate(){let t=this;this.$refs.pageDataRef.validate(async e=>{if(e){let e=this.pageData;null!=await t.$update(e,"OAMP_update_tool_info")?(t.$message.success("修改信息成功"),t.$onClose(t.module_name,"pageDataRef",t.refresh_page_method)):t.$message.error("修改信息失败")}})}}},i={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-dialog",{attrs:{title:"工具信息",visible:t.pageInfo.isShow,"modal-append-to-body":!1,"close-on-click-modal":!1,center:!0,"lock-scroll":!1},on:{close:function(e){return t.onClose(t.module_name,"pageDataRef")}}},[o("el-form",{ref:"pageDataRef",attrs:{inline:!0,model:t.pageData,rules:t.pageDataRules,"label-width":"130px",size:"small"}},[o("el-form-item",{attrs:{label:"工具所属项目",prop:"tool_project_id"}},[o("el-select",{attrs:{placeholder:"请选工具所属项目",clearable:""},model:{value:t.pageData.tool_project_id,callback:function(e){t.$set(t.pageData,"tool_project_id",e)},expression:"pageData.tool_project_id"}},t._l(t.tool_project_info_list,function(t){return o("el-option",{key:t.project_id,attrs:{label:t.project_name,value:t._id}})}),1)],1),t._v(" "),o("el-form-item",{attrs:{label:"工具上下文",prop:"toolContext"}},[o("el-input",{attrs:{placeholder:"设置工具上下文"},model:{value:t.pageData.toolContext,callback:function(e){t.$set(t.pageData,"toolContext",e)},expression:"pageData.toolContext"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"工具类型",prop:"tool_type_code_id","label-width":"130px"}},[o("el-select",{attrs:{placeholder:"请选工具类型",clearable:""},model:{value:t.pageData.tool_type_code_id,callback:function(e){t.$set(t.pageData,"tool_type_code_id",e)},expression:"pageData.tool_type_code_id"}},t._l(t.tool_type_code_list,function(t){return o("el-option",{key:t.codeId,attrs:{label:t.codeValue,value:t.codeId}})}),1)],1),t._v(" "),o("el-form-item",{attrs:{label:"工具名称",prop:"toolName"}},[o("el-input",{model:{value:t.pageData.toolName,callback:function(e){t.$set(t.pageData,"toolName",e)},expression:"pageData.toolName"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"工具IP",prop:"toolHost"}},[o("el-input",{model:{value:t.pageData.toolHost,callback:function(e){t.$set(t.pageData,"toolHost",e)},expression:"pageData.toolHost"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"工具端口",prop:"toolPort"}},[o("el-input",{model:{value:t.pageData.toolPort,callback:function(e){t.$set(t.pageData,"toolPort",e)},expression:"pageData.toolPort"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"工具使用者",prop:"toolUser"}},[o("el-input",{model:{value:t.pageData.toolUser,callback:function(e){t.$set(t.pageData,"toolUser",e)},expression:"pageData.toolUser"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"工具使用者密码",prop:"toolPassword"}},[o("el-input",{model:{value:t.pageData.toolPassword,callback:function(e){t.$set(t.pageData,"toolPassword",e)},expression:"pageData.toolPassword"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"工具根路径",prop:"toolRootPath"}},[o("el-input",{staticStyle:{width:"696px"},model:{value:t.pageData.toolRootPath,callback:function(e){t.$set(t.pageData,"toolRootPath",e)},expression:"pageData.toolRootPath"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"备注",prop:"remark"}},[o("el-input",{staticStyle:{width:"660px"},attrs:{autosize:"",type:"textarea"},model:{value:t.pageData.remark,callback:function(e){t.$set(t.pageData,"remark",e)},expression:"pageData.remark"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){return t.onClose(t.module_name,"pageDataRef")}}},[t._v("关 闭")]),t._v(" "),"add"==t.pageInfo.pageModel?o("el-button",{attrs:{type:"primary"},on:{click:t.addToolInfo}},[t._v("确 定")]):"edit"==t.pageInfo.pageModel?o("el-button",{attrs:{type:"primary"},on:{click:t.onUpdate}},[t._v("更 新")]):t._e()],1)],1)},staticRenderFns:[]};var n={name:"toolSetting",components:{list:r,info:o("VU/8")(s,i,!1,function(t){o("gzpI")},"data-v-39fed9f3",null).exports}},c={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"v-container"},[e("el-breadcrumb",[e("el-breadcrumb-item",{attrs:{to:{name:"setting"}}},[this._v("设置")]),this._v(" "),e("el-breadcrumb-item",[this._v("工具管理")])],1),this._v(" "),e("hr"),this._v(" "),e("list"),this._v(" "),e("info")],1)},staticRenderFns:[]};var p=o("VU/8")(n,c,!1,function(t){o("IJwd")},"data-v-59b81508",null);e.default=p.exports},gzpI:function(t,e){},uG1M:function(t,e){}});
//# sourceMappingURL=9.157e3fa0a866dd2d907b.js.map