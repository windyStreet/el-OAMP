webpackJsonp([19],{"4LCB":function(s,t){},g8jB:function(s,t,e){s.exports=e.p+"static/img/header.7688eef.jpg"},"kQb+":function(s,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={name:"runtimeAll",data:()=>({isHasHistoryMsg:!0,historyMsgs:[{text:"你好1",right:1}],msgs:[{text:"数据已",right:0},{text:"数据已",right:0},{text:"数据已",right:0},{text:"数据已",right:0},{text:"数据已",right:0},{text:"数据已",right:0},{text:"数据已",right:0},{text:"数据已",right:0},{text:"数据已",right:0},{text:"数据已",right:0},{text:"数据已",right:0},{text:"数据已",right:0},{text:"数据已",right:0},{text:"数据已",right:0}],senderId:null,sendMsg:null,chatObj:{id:null,name:null,path:null}}),created(){this.getCurChatObj(),this.initWebSocket()},destroyed(){this.websock.close()},watch:{msgs(s,t){let e=this;setTimeout(function(){e.$refs.chatContent.scrollTop=e.$refs.chatContent.scrollHeight},100)}},methods:{getCurChatObj(){this.chatObj.id="group_chat_1",this.chatObj.name="群聊1",this.senderId=this.$store.getters.getLoginInfo.userInfo.id},historymsg(){this.isHasHistoryMsg=!1;for(let s=0;s<this.historyMsgs.length;s++)this.msgs.unshift(this.historyMsgs.reverse()[s])},initWebSocket(){this.websock=new WebSocket(this.$socketCHATURI),this.websock.onmessage=this.websocketonmessage,this.websock.onopen=this.websocketonopen,this.websock.onerror=this.websocketonerror,this.websock.onclose=this.websocketclose},websocketonopen(){this.sendMsg="用户进入",this.websock.send(JSON.stringify(this.$createSocketData(this.$enum.CHAT_MODE.GROUP,this.chatObj.id,this.senderId,this.sendMsg)))},websocketonerror(){this.initWebSocket()},websocketonmessage(s){let t=JSON.parse(s.data);this.msgs.push({right:t.senderId===this.senderId,text:t.msg})},websocketsend(){null!==this.sendMsg&&null!==this.chatObj.id&&(this.websock.send(JSON.stringify(this.$createSocketData(this.$enum.CHAT_MODE.GROUP,this.chatObj.id,this.senderId,this.sendMsg))),this.$refs.chatContent.scrollTop=this.$refs.chatContent.scrollHeight,this.sendMsg=null)},websocketclose(s){console.log("断开连接",s)}}},a={render:function(){var s=this,t=s.$createElement,i=s._self._c||t;return i("div",{staticClass:"v-container"},[i("el-breadcrumb",[i("el-breadcrumb-item",{attrs:{to:{name:"runtimeAll"}}},[s._v("运行状态")]),s._v(" "),i("el-breadcrumb-item",[s._v("运行总览")])],1),s._v(" "),i("hr"),s._v(" "),i("div",{staticClass:"msg-left-frame"},[i("header",[s._v("\n            通讯录\n        ")]),s._v(" "),i("div",{staticClass:"address-box",staticStyle:{overflow:"auto"}},[i("el-collapse",{on:{change:s.handleChange},model:{value:s.activeNames,callback:function(t){s.activeNames=t},expression:"activeNames"}},[i("el-collapse-item",{attrs:{title:"群组",name:"1"}},[i("li",{staticClass:"address-li"},[i("img",{attrs:{src:e("g8jB")}}),s._v(" "),i("p",[s._v("ssss")])]),s._v(" "),i("li",{staticClass:"address-li"},[i("img",{attrs:{src:e("g8jB")}}),s._v(" "),i("p",[s._v("ssss")])]),s._v(" "),i("li",{staticClass:"address-li"},[i("img",{attrs:{src:e("g8jB")}}),s._v(" "),i("p",[s._v("ssss")])]),s._v(" "),i("li",{staticClass:"address-li"},[i("img",{attrs:{src:e("g8jB")}}),s._v(" "),i("p",[s._v("ssss")])]),s._v(" "),i("li",{staticClass:"address-li"},[i("img",{attrs:{src:e("g8jB")}}),s._v(" "),i("p",[s._v("ssss")])])]),s._v(" "),i("el-collapse-item",{attrs:{title:"通讯录",name:"2"}},[i("li",{staticClass:"address-li"},[i("p",[s._v("ssss")])]),s._v(" "),i("li",{staticClass:"address-li"},[i("p",[s._v("ssss")])]),s._v(" "),i("li",{staticClass:"address-li"},[i("p",[s._v("ssss")])]),s._v(" "),i("li",{staticClass:"address-li"},[i("p",[s._v("ssss")])]),s._v(" "),i("li",{staticClass:"address-li"},[i("p",[s._v("ssss")])]),s._v(" "),i("li",{staticClass:"address-li"},[i("p",[s._v("ssss")])])]),s._v(" "),i("el-collapse-item",{attrs:{title:"其他",name:"3"}},[i("li",{staticClass:"address-li"},[i("p",[s._v("ssss")])]),s._v(" "),i("li",{staticClass:"address-li"},[i("p",[s._v("ssss")])]),s._v(" "),i("li",{staticClass:"address-li"},[i("p",[s._v("ssss")])]),s._v(" "),i("li",{staticClass:"address-li"},[i("p",[s._v("ssss")])]),s._v(" "),i("li",{staticClass:"address-li"},[i("p",[s._v("ssss")])]),s._v(" "),i("li",{staticClass:"address-li"},[i("p",[s._v("ssss")])])]),s._v(" "),i("el-collapse-item",{attrs:{title:"小组",name:"4"}},[i("li",{staticClass:"address-li"},[i("p",[s._v("ssss")])]),s._v(" "),i("li",{staticClass:"address-li"},[i("p",[s._v("ssss")])]),s._v(" "),i("li",{staticClass:"address-li"},[i("p",[s._v("ssss")])]),s._v(" "),i("li",{staticClass:"address-li"},[i("p",[s._v("ssss")])]),s._v(" "),i("li",{staticClass:"address-li"},[i("p",[s._v("ssss")])]),s._v(" "),i("li",{staticClass:"address-li"},[i("p",[s._v("ssss")])])])],1)],1)]),s._v(" "),i("div",{staticClass:"msg-frame"},[i("header",[s._m(0),s._v("\n            "+s._s(s.chatObj.name)+"\n        ")]),s._v(" "),i("div",{staticClass:"msg-box"},[i("ul",{ref:"chatContent",staticClass:"msg-ul"},[s.isHasHistoryMsg?i("li",{staticClass:"muchlist"},[i("a",{attrs:{href:"javascript:void(0)"},on:{click:s.historymsg}},[s._v("查看更多历史消息")])]):i("li",{staticClass:"muchlist"},[i("a",[s._v("没有更多消息了")])]),s._v(" "),s._l(s.msgs,function(t){return i("li",{staticClass:"all-list",class:{right:t.right}},[i("img",{attrs:{src:e("g8jB")}}),s._v(" "),i("p",[s._v(s._s(t.text))])])})],2)]),s._v(" "),i("div",{staticClass:"send-box"},[i("el-input",{attrs:{placeholder:"请输入内容"},model:{value:s.sendMsg,callback:function(t){s.sendMsg=t},expression:"sendMsg"}},[i("template",{slot:"append"},[i("el-button",{attrs:{type:"primary"},on:{click:s.websocketsend}},[s._v("消息发送")])],1)],2)],1)])],1)},staticRenderFns:[function(){var s=this.$createElement,t=this._self._c||s;return t("div",{staticClass:"logo"},[t("img",{attrs:{src:e("g8jB")}})])}]};var l=e("VU/8")(i,a,!1,function(s){e("4LCB")},"data-v-5c4c484c",null);t.default=l.exports}});
//# sourceMappingURL=19.d8899783d37e8d9284a5.js.map