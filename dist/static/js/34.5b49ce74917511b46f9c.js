webpackJsonp([34],{"5rPT":function(e,t){},t3W2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={name:"sysFunctionConf",data:()=>({role_code_list:null,searchFormData:{role_id:null},is_select_role_id:!1,is_to_right:!1,is_to_left:!1,treeData:[],treeCheckedNodes:[],treeHalfCheckedNodes:[],addTreeData:[],addTreeCheckedNodes:[],addTreeHalfCheckedNodes:[],defaultProps:{children:"children",label:"label"}}),watch:{"searchFormData.role_id":{handler(e,t){null!==e&&(this.is_select_role_id=!0,e!==t&&this.search_add_tree_data())},deep:!0,immediate:!0},treeCheckedNodes:{handler(e,t){this.is_to_right=e.length>0}},addTreeCheckedNodes:{handler(e,t){this.is_to_left=e.length>0}}},async mounted(){let e=await this.$exec({role_type_code_id:"1"},"OAMP_search_role_code_list");null!=e&&null!=e.data&&(this.role_code_list=e.data),this.search_tree_data()},methods:{renderContent:function(e,{node:t,data:a,store:r}){return e("span",[e("i",{attrs:{class:"iconfont "+a.value.router_icon_class}}),e("span","     "),e("span",t.label)])},async search_tree_data(){let e=await this.$exec({},"OAMP_search_sys_router_tree_data");this.treeData=null===e?[]:[e]},async search_add_tree_data(){let e=await this.$exec({role_id:this.searchFormData.role_id},"OAMP_search_sys_router_tree_data");this.addTreeData=null===e?[]:[e]},treeCheck(e,{checkedNodes:t,checkedKeys:a,halfCheckedNodes:r,halfCheckedKeys:s}){this.treeCheckedKeys=a,this.treeCheckedNodes=t,this.treeHalfCheckedNodes=r},addTreeCheck(e,{checkedNodes:t,checkedKeys:a,halfCheckedNodes:r,halfCheckedKeys:s}){this.addTreeCheckedNodes=t},async addRouterAuthority(){let e={data:[].concat(this.treeHalfCheckedNodes).concat(this.treeCheckedNodes),role_id:this.searchFormData.role_id},t=await this.$exec(e,"OMAP_add_router_authority");null!==t&&"true"===t.is_success&&(this.$message.success("添加路由权限信息成功"),this.treeCheckedNodes=[],this.search_tree_data(),this.search_add_tree_data())},async removeRouterAuthority(){let e={data:[].concat(this.addTreeCheckedNodes)},t=await this.$exec(e,"OMAP_remove_router_authority");null!==t&&"true"===t.is_success&&(this.$message.success("移除路由权限信息成功"),this.addTreeCheckedNodes=[],this.search_add_tree_data())}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"v-container"},[a("el-breadcrumb",[a("el-breadcrumb-item",{attrs:{to:{name:"setting"}}},[e._v("设置")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:{name:"sysManage"}}},[e._v("系统管理")]),e._v(" "),a("el-breadcrumb-item",[e._v("系统功能分配")])],1),e._v(" "),a("hr"),e._v(" "),a("el-row",[a("el-col",{attrs:{offset:2,span:10}},[a("el-form",{ref:"searchFormRef",attrs:{inline:!0,model:e.searchFormData,size:"mini"}},[a("el-form-item",{attrs:{label:"选择角色",prop:"role_id"}},[a("el-select",{attrs:{placeholder:"角色名称",clearable:""},model:{value:e.searchFormData.role_id,callback:function(t){e.$set(e.searchFormData,"role_id",t)},expression:"searchFormData.role_id"}},e._l(e.role_code_list,function(e){return a("el-option",{key:e._id,attrs:{label:e.role_name,value:e._id}})}),1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{offset:2,span:10}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("应用权限")])],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{offset:2,span:8}},[a("div",{style:"height:"+e.getAutoHeight(178)+";overflow-y:scroll;background-color: #fff;padding: 10px;"},[a("el-tree",{ref:"tree_ref",attrs:{"show-checkbox":"",draggable:"",data:e.treeData,props:e.defaultProps,"default-expand-all":"","render-content":e.renderContent},on:{check:e.treeCheck}})],1)]),e._v(" "),a("el-col",{attrs:{span:4}},[a("div",{style:"text-align:center; width:100%;margin:0px;padding-top:"+e.getAutoHeight(600)+";"},[a("el-row",[e.is_to_right&&e.is_select_role_id?a("el-button",{attrs:{type:"primary",circle:""},on:{click:e.addRouterAuthority}},[a("i",{staticClass:"iconfont icon-xiangyou"})]):a("el-button",{attrs:{type:"info",circle:""}},[a("i",{staticClass:"iconfont icon-xiangyou"})])],1),e._v(" "),a("hr"),e._v(" "),a("el-row",[e.is_to_left&&e.is_select_role_id?a("el-button",{attrs:{type:"primary",circle:""},on:{click:e.removeRouterAuthority}},[a("i",{staticClass:"iconfont icon-xiangzuo"})]):a("el-button",{attrs:{type:"info",circle:""}},[a("i",{staticClass:"iconfont icon-xiangzuo"})])],1)],1)]),e._v(" "),a("el-col",{attrs:{span:8}},[a("div",{style:"height:"+e.getAutoHeight(178)+";overflow-y:scroll;background-color: #fff;padding: 10px;"},[a("el-tree",{ref:"tree_ref",attrs:{"show-checkbox":"",draggable:"",data:e.addTreeData,props:e.defaultProps,"default-expand-all":"","render-content":e.renderContent},on:{check:e.addTreeCheck}})],1)])],1)],1)},staticRenderFns:[]};var o=a("VU/8")(r,s,!1,function(e){a("5rPT")},"data-v-536aef56",null);t.default=o.exports}});
//# sourceMappingURL=34.5b49ce74917511b46f9c.js.map